import{d as T,a1 as D,m as R,r as H,aM as oe,a2 as ae,e as a,a0 as A,n as P,aN as Y,aO as le,aB as se,C as re,aj as G,R as S,x as X,z as ie,y as K,T as ce,aP as ue,aQ as M,ah as Z,ai as de,a8 as fe,ac as me,ak as ge,aR as Be,aS as be,aT as ye,M as ve,av as j,aJ as he,k as q,aU as Ce,c as $,b as B,f as O,w as L,g as N,F as W,ax as we,i as z,az as xe,al as ke,aV as pe,o as F}from"./index-CcFo5enO.js";import{m as _e,u as Se,c as Pe}from"./index-DoBZ-8r4.js";import{L as Te,a as Oe,b as Ie,P as De,p as Re}from"./index-DdHU7I1S.js";const[ee,J]=R("action-bar"),te=Symbol(ee),Ae={placeholder:Boolean,safeAreaInsetBottom:D};var Ee=T({name:ee,props:Ae,setup(e,{slots:s}){const t=H(),r=oe(t,J),{linkChildren:i}=ae(te);i();const d=()=>{var f;return a("div",{ref:t,class:[J(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(f=s.default)==null?void 0:f.call(s)])};return()=>e.placeholder?r(d):d()}});const $e=A(Ee),[Le,_]=R("button"),Ne=P({},G,{tag:S("button"),text:String,icon:String,type:S("default"),size:S("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:S("button"),loadingSize:X,loadingText:String,loadingType:String,iconPosition:S("left")});var ze=T({name:Le,props:Ne,emits:["click"],setup(e,{emit:s,slots:t}){const r=Y(),i=()=>t.loading?t.loading():a(Te,{size:e.loadingSize,type:e.loadingType,class:_("loading")},null),d=()=>{if(e.loading)return i();if(t.icon)return a("div",{class:_("icon")},[t.icon()]);if(e.icon)return a(se,{name:e.icon,class:_("icon"),classPrefix:e.iconPrefix},null)},f=()=>{let n;if(e.loading?n=e.loadingText:n=t.default?t.default():e.text,n)return a("span",{class:_("text")},[n])},u=()=>{const{color:n,plain:l}=e;if(n){const m={color:l?n:"white"};return l||(m.background=n),n.includes("gradient")?m.border=0:m.borderColor=n,m}},v=n=>{e.loading?re(n):e.disabled||(s("click",n),r())};return()=>{const{tag:n,type:l,size:m,block:C,round:x,plain:h,square:w,loading:k,disabled:o,hairline:c,nativeType:y,iconPosition:g}=e,p=[_([l,m,{plain:h,block:C,round:x,square:w,loading:k,disabled:o,hairline:c}]),{[le]:c}];return a(n,{type:y,class:p,style:u(),disabled:o,onClick:v},{default:()=>[a("div",{class:_("content")},[g==="left"&&d(),f(),g==="right"&&d()])]})}}});const V=A(ze),[Fe,Ve]=R("action-bar-button"),Ue=P({},G,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var He=T({name:Fe,props:Ue,setup(e,{slots:s}){const t=Y(),{parent:r,index:i}=ie(te),d=K(()=>{if(r){const u=r.children[i.value-1];return!(u&&"isButton"in u)}}),f=K(()=>{if(r){const u=r.children[i.value+1];return!(u&&"isButton"in u)}});return Oe({isButton:!0}),()=>{const{type:u,icon:v,text:n,color:l,loading:m,disabled:C}=e;return a(V,{class:Ve([u,{last:f.value,first:d.value}]),size:"large",type:u,icon:v,color:l,loading:m,disabled:C,onClick:t},{default:()=>[s.default?s.default():n]})}}});const Q=A(He),[Ke,b,I]=R("dialog"),Me=P({},Re,{title:String,theme:String,width:X,message:[String,Function],callback:Function,allowHtml:Boolean,className:ge,transition:S("van-dialog-bounce"),messageAlign:String,closeOnPopstate:D,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:D,closeOnClickOverlay:Boolean,keyboardEnabled:D,destroyOnClose:Boolean}),je=[...Ie,"transition","closeOnPopstate","destroyOnClose"];var ne=T({name:Ke,props:Me,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:s,slots:t}){const r=H(),i=ce({confirm:!1,cancel:!1}),d=o=>s("update:show",o),f=o=>{var c;d(!1),(c=e.callback)==null||c.call(e,o)},u=o=>()=>{e.show&&(s(o),e.beforeClose?(i[o]=!0,me(e.beforeClose,{args:[o],done(){f(o),i[o]=!1},canceled(){i[o]=!1}})):f(o))},v=u("cancel"),n=u("confirm"),l=ue(o=>{var c,y;if(!e.keyboardEnabled||o.target!==((y=(c=r.value)==null?void 0:c.popupRef)==null?void 0:y.value))return;({Enter:e.showConfirmButton?n:M,Escape:e.showCancelButton?v:M})[o.key](),s("keydown",o)},["enter","esc"]),m=()=>{const o=t.title?t.title():e.title;if(o)return a("div",{class:b("header",{isolated:!e.message&&!t.default})},[o])},C=o=>{const{message:c,allowHtml:y,messageAlign:g}=e,p=b("message",{"has-title":o,[g]:g}),E=Be(c)?c():c;return y&&typeof E=="string"?a("div",{class:p,innerHTML:E},null):a("div",{class:p},[E])},x=()=>{if(t.default)return a("div",{class:b("content")},[t.default()]);const{title:o,message:c,allowHtml:y}=e;if(c){const g=!!(o||t.title);return a("div",{key:y?1:0,class:b("content",{isolated:!g})},[C(g)])}},h=()=>a("div",{class:[ye,b("footer")]},[e.showCancelButton&&a(V,{size:"large",text:e.cancelButtonText||I("cancel"),class:b("cancel"),style:{color:e.cancelButtonColor},loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:v},null),e.showConfirmButton&&a(V,{size:"large",text:e.confirmButtonText||I("confirm"),class:[b("confirm"),{[be]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:n},null)]),w=()=>a($e,{class:b("footer")},{default:()=>[e.showCancelButton&&a(Q,{type:"warning",text:e.cancelButtonText||I("cancel"),class:b("cancel"),color:e.cancelButtonColor,loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:v},null),e.showConfirmButton&&a(Q,{type:"danger",text:e.confirmButtonText||I("confirm"),class:b("confirm"),color:e.confirmButtonColor,loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:n},null)]}),k=()=>t.footer?t.footer():e.theme==="round-button"?w():h();return()=>{const{width:o,title:c,theme:y,message:g,className:p}=e;return a(De,Z({ref:r,role:"dialog",class:[b([y]),p],style:{width:fe(o)},tabindex:0,"aria-labelledby":c||g,onKeydown:l,"onUpdate:show":d},de(e,je)),{default:()=>[m(),x(),k()]})}}});let U;const qe={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,destroyOnClose:!1};let We=P({},qe);function Je(){({instance:U}=_e({setup(){const{state:s,toggle:t}=Se();return()=>a(ne,Z(s,{"onUpdate:show":t}),null)}}))}function Qe(e){return ve?new Promise((s,t)=>{U||Je(),U.open(P({},We,e,{callback:r=>{(r==="confirm"?s:t)(r)}}))}):Promise.resolve(void 0)}const Ye=e=>Qe(P({showCancelButton:!0},e));A(ne);const Ge={class:"p-4 text-xl border-b"},Xe={class:"divide-y mb-16"},Ze=["onClick"],et=["onClick"],tt=["onClick"],lt=T({__name:"MyVotes",async setup(e){let s,t;j();var r=H([]);try{var i=([s,t]=he(()=>q.get("/vote")),s=await s,t(),s);r.value=i.data.result}catch{r.value=[],j()}var[d,f]=Ce();async function u(n,l){try{await Ye({message:`ç¡®å®šè¦åˆ é™¤ [${n.title}] å—ï¼Ÿ`}),await q.delete("/vote/"+n.voteId),r.value.splice(l,1),f(-1)}catch{}}async function v(n){Pe(location.href),pe({type:"success",message:"é“¾æŽ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼"})}return(n,l)=>{const m=N("ArrowLeftBold"),C=N("el-icon"),x=N("RouterLink");return F(),$(W,null,[B("h1",Ge,[a(x,{to:"/me"},{default:L(()=>[a(C,{class:"relative top-px"},{default:L(()=>[a(m)]),_:1})]),_:1}),l[0]||(l[0]=O(" æˆ‘çš„æŠ•ç¥¨ ",-1))]),B("div",Xe,[(F(!0),$(W,null,we(z(r),(h,w)=>(F(),$("div",{class:"",key:h.voteId},[B("div",{onClick:k=>z(f)(w),class:"px-4 hover:bg-green-100 flex items-center justify-between h-16"},[B("span",null,xe(h.title),1),l[1]||(l[1]=B("span",null,"30",-1))],8,Ze),B("div",{class:ke([{hidden:z(d)!==w},"flex items-center"])},[a(x,{to:`/vote/${h.voteId}`,class:"hover:bg-green-100 py-2 h-16 cursor-pointer flex flex-col basis-0 grow items-center justify-center border"},{default:L(()=>[...l[2]||(l[2]=[B("span",null,"ðŸ“š",-1),O("æŸ¥çœ‹",-1)])]),_:1},8,["to"]),B("span",{onClick:k=>v(h.voteId),class:"hover:bg-green-100 py-2 h-16 cursor-pointer flex flex-col basis-0 grow items-center justify-center border"},[...l[3]||(l[3]=[B("span",null,"ðŸ“š",-1),O("åˆ†äº«",-1)])],8,et),B("span",{onClick:k=>u(h,w),class:"hover:bg-green-100 py-2 h-16 cursor-pointer flex flex-col basis-0 grow items-center justify-center border"},[...l[4]||(l[4]=[B("span",null,"ðŸ“š",-1),O("åˆ é™¤",-1)])],8,tt)],2)]))),128))])],64)}}});export{lt as default};
